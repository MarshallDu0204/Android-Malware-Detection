import os
import zipfile
from tqdm import tqdm
 
def apk2dext(base_path,filepath):
    apkfile = zipfile.ZipFile(filepath,'r')

    filepath = filepath.split("/")[-1]
 
    f = open(base_path + filepath,'wb')
    for tempfile in apkfile.namelist(): 
        if tempfile.endswith('.dex'):
            f.write(apkfile.read(tempfile))



def decode_apk(base_path):
	file_dir = "D://origin_data/Adware/"
	apk_list = os.listdir(file_dir)
	for apk in tqdm(apk_list):
		apkpath = file_dir+apk
		apk2dext(base_path,apkpath)

decode_apk("Adware_dex/")