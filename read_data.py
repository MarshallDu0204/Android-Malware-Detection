from tqdm import tqdm
import codecs
from keras.preprocessing.sequence import pad_sequences
import numpy as np

data_file = codecs.open("process_data.csv", 'w', 'utf-8')

train_data = []
label_list = []

with open("apk_data.csv","r",encoding = 'utf-8') as f:
	lines = f.readlines()
	for line in tqdm(lines):#tqdm(lines)
		
		line = line.split(",")
		data = line[1].split("|")
		label = line[2]
		label = label.strip()
		data = data[:-1]
		tmp_data = []
		for item in data:
			tmp_data.append(int(item))
		train_data.append(tmp_data)
		label_list.append(int(label))


sequence = pad_sequences(train_data, maxlen=200000,padding = 'post')
np.save("sequence.npy",np.asarray(sequence))
out_label = ''
for item in label_list:
	out_label += str(item)+","
with open("seq_label.csv","w",encoding = 'utf-8') as f1:
	f1.write(out_label)

